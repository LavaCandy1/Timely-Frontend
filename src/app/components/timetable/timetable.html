<div class="timetable">
  <!-- Header -->
  <div class="header">
    <h2>September 2025 {{ userRole }}</h2>
  </div>

  <!-- Table -->
  <div class="grid">
    <!-- Days Row -->
    <div class="row header-row">
      <div class="time-cell"></div>
      <div class="day-cell" *ngFor="let day of days">{{ day | slice : 0 : 3 | uppercase }}</div>
    </div>

    <!-- Time Rows -->
    <div class="row" *ngFor="let time of times; let i = index">
      <div class="time-cell">{{ time }}</div>

      <div class="cell" *ngFor="let day of days">
        @if (userRole === "STUDENT") {
        <ng-container *ngIf="getSlotForDayAndTimeStudent(day, time) as slot">
          <div
            class="class-card"
            [ngClass]="slot.slotType.toLowerCase()"
            [ngClass]="userRole.toLowerCase()"
          >
            <span>{{ slot.courseCode }}</span>
            <span>{{ slot.location }}</span>
            <span>{{ slot.instructor }}</span>
          </div>
        </ng-container>
        } @else if (userRole === "TEACHER") {
        <ng-container *ngIf="getSlotForDayAndTimeTeacher(day, time) as slot">
          <div
            class="class-card"
            [class]="[slot.slotType.toLowerCase(), userRole.toLowerCase()]"
            (mouseenter)="onMouseEnter(slot)"
            (mouseleave)="onMouseLeave()"
          >
            <span>{{ slot.courseCode }}</span>
            <span>{{ slot.location }}</span>
            <!-- batches -->
            @if (hoveredSlot === slot) {
            <br />
            <span class="batches">{{ slot.batches.join(', ') }}</span>
            <!-- cancel class button -->
            <div class="buttons">
              <span class="cancel-btn">Cancel Class</span>
              <span class="reschedule-btn">Reschedule</span>
            </div>
            }
          </div>
        </ng-container>
        }
      </div>
    </div>
  </div>
</div>
